{% extends 'base.html' %}

{% block title %}–†–∞—Å—Å—ã–ª–∫–∏{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>–†–∞—Å—Å—ã–ª–∫–∏</h1>
            <a href="{% url 'mailings:mailing_create' %}" class="btn btn-primary">‚ûï –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</a>
        </div>

        {% if mailings %}
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                            <th>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</th>
                            <th>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ö–æ–ª-–≤–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for mailing in mailings %}
                            <tr>
                                <td>{{ mailing.id }}</td>
                                <td>{{ mailing.message.subject|truncatechars:50 }}</td>
                                <td>{{ mailing.start_time|date:"d.m.Y H:i" }}</td>
                                <td>{{ mailing.end_time|date:"d.m.Y H:i" }}</td>
                                <td>
                                    {% if mailing.status == 'created' %}
                                        <span class="badge bg-secondary">–°–æ–∑–¥–∞–Ω–∞</span>
                                    {% elif mailing.status == 'started' %}
                                        <span class="badge bg-success">–ó–∞–ø—É—â–µ–Ω–∞</span>
                                    {% elif mailing.status == 'completed' %}
                                        <span class="badge bg-danger">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                                    {% endif %}
                                </td>
                                <td>{{ mailing.recipients.count }}</td>
                                <td>
                                    <a href="{% url 'mailings:mailing_detail' mailing.pk %}" class="btn btn-sm btn-info" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">üëÅÔ∏è</a>
                                    <a href="{% url 'mailings:mailing_update' mailing.pk %}" class="btn btn-sm btn-warning" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
                                    <a href="{% url 'mailings:mailing_delete' mailing.pk %}" class="btn btn-sm btn-danger" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="alert alert-info">
                –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ä–∞—Å—Å—ã–ª–æ–∫. <a href="{% url 'mailings:mailing_create' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É!</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}